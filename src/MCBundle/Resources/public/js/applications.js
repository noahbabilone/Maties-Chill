var cache = {};$(function () {    console.log("Applications");    /* Deleting User */    $(".btn-remove").click(function (e) {        var action = $(this).attr("data-action");        $(".btn-ok-delete").attr("data-action", action);        var idObject = $.trim($(this).attr("data-value").replace(action + "-", ""))        $(".btn-ok-delete").attr("data-value", idObject);        $(".btn-ok-delete").attr("data-line", $(this).attr("data-line"));        if (action == "session") {            $(".modal-body").html("<h5>Vous voulez vraiment supprimer la séance (<b>N°" + idObject + "</b>) ?</h5>");            $(".modal-body h5").css("font-size", "16px");        }        $('#remove-modal').modal();        e.preventDefault();    });    $(".btn-ok-delete").click(function (e) {        var href = null, data = null;        var action = $(this).attr("data-action");        var line = $.trim($(this).attr("data-line"));        var idObject = $.trim($(this).attr("data-value"));        if (action == "session") {            href = Routing.generate('back_office_remove_session');            var username = $.trim($(this).attr("data-username"));            data = {                id: idObject,            };        }        if (href != null && data != null) {            $.getJSON(href, data)                .done(function (data) {                    console.log(data.result);                    if (data.result == "success") {                        $('#' + line).fadeOut(500, function () {                            $(this).remove();                        });                        $.notify({                            // options                            icon: 'glyphicon glyphicon-ok',                            message: data.message,                        }, {                            type: "success",                        });                    } else {                        $.notify({                            // options                            icon: 'glyphicon glyphicon-warning-sign',                            title: 'Error: ',                            message: 'Une erreur s\'est produit lors de la suppression de l\'utilisateur',                        }, {                            type: "danger",                        });                    }                });        }        e.preventDefault();    });    $("#search_film").autocomplete({        //source: availableTags        source: function (request, response) {            //Si la réponse est dans le cache            if (request.term in cache) {                response($.map(cache[request.term], function (item) {                    console.log(item);                    return {                        label: item.title + ", " + item.code,                        value: function () {                            $("#search_film").val(item.title);                            $("#search_film").attr("data-value", item.code);                            return item.title;                        }                    };                }));            } else {                var href = Routing.generate('search_film_ajax');                var data = {search: $.trim($("#search_film").val())};                // $.getJSON(href, data)                $.ajax({                    url: href,                    dataType: "json",                    data: data,                    type: 'GET',                    beforeSend: function () {                        $("#icon_search_film").removeClass("fa-film")                            .addClass("fa-spin")                            .addClass("fa-spinner");                    }                }).done(function (data) {                        $("#icon_search_film")                            .removeClass("fa-spin")                            .removeClass("fa-spinner")                            .addClass("fa-film");                        if (data.response == "success") {                            if (!data.result.length) {                                var result = [                                    {                                        label: 'Aucun film trouvé',                                        value: response.term                                    }                                ];                                response(result);                            } else {                                cache[request.term] = data.result;                                console.log(data.result);                                response($.map(data.result, function (item) {                                    return {                                        label: item.title + "(" + item.code + ")",                                        value: function () {                                            $("#search_film").val(item.title);                                            $("#search_film").attr("data-value", item.code);                                            return item.title;                                        }                                    };                                }));                            }                        }                    }                )                ;            }        },        minLength: 2,        delay: 10    });    //$("#search_film").change(function () {    //    $("#icon_search_film").removeClass("fa-spin").removeClass("fa-spinner").addClass("fa-film");    //});});// Doc Ready